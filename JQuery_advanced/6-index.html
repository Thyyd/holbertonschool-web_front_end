<!DOCTYPE html>
<html lang="en" dir="ltr">

    <head>
        <script
            src="https://code.jquery.com/jquery-4.0.0.slim.min.js"
            integrity="sha256-8DGpv13HIm+5iDNWw1XqxgFB4mj+yOKFNb+tHBZOowc="
            crossorigin="anonymous"></script>
        <meta charset="utf-8" />
        <title>Task 0</title>
        <script type="application/javascript">
            $(document).ready(function() { //Vérifie si le jQuerry est disponible
                function createFamilyTree()
                {
                    $("body").append(
                        $("<table></table>").append(
                            $("<thead></thead>").append(
                                $("<tr></tr>").append(
                                    ($("<th></th>")).text("Firstname"),
                                    ($("<th></th>")).text("Lastname")
                                )
                            ),
                            $("<tbody></tbody>").append()
                        )
                    );
                }

                function addNewMember(firstName, lastName, position)
                {
                    const row = $("<tr></tr>").append(
                            ($("<td></td>")).text(firstName),
                            ($("<td></td>")).text(lastName),
                            ($("<td></td>")).text("(x)").css({"background-color": "orange"}) // Inline CSS
                                .click(function() { // Ajout de la fonction click à chaque création d'une cellule (x)
                                    $(this).closest("tr").remove(); // Quand le (x) est cliqué, il supprime toute la balise tr parent la plus proche.
                                })
                        );

                    if (position === "before") {
                        $("tbody").prepend(row); // Ajoute la ligne en haut du tableau
                    }
                    else {
                        $("tbody").append(row); // Ajoute la ligne à la fin du tableau
                    }
                }

                function createForm()
                {
                    const form = $("<form></form>").append(
                        $("<input>").attr({ type: "text"}),
                        $("<input>").attr({ type: "text"}),
                        $("<select></select>").append(
                            $("<option></option>").val("before").text("Before"),
                            $("<option></option>").val("after").text("After")
                        ),
                        $("<input>").attr({ type: "submit", value: "Submit" })
                    );

                    // Ajout du form Avant le tableau
                    $("table").before(form);

                    form.on("click", "input[type='submit']", function(e) { // Équivalent de .addEventListener.
                        e.preventDefault(); // Fait en sorte que le form ne recharge pas la page automatiquement.

                        const firstName = $("input:first").val();
                        const lastName = $("input:nth-of-type(2)").val();
                        const position = $("select").val();

                        addNewMember(firstName, lastName, position);
                    })
                }

                createFamilyTree();
                addNewMember("Guillaume", "Salva");
                addNewMember("Arielle", "Snizt");
                addNewMember("Fanette", "Snizt", "before");
                addNewMember("Gerard", "Snizt");
                addNewMember("Victor", "Salva");
                createForm()

                /*$("tr td:last-child").css({ //Bloc CSS
                    "background-color": "orange"
                });*/
            })
        </script>
    </head>

    <body>

    </body>

</html>